Variables:
  workdir: "C:\\Users\\christian\\git\\github.com\\ChristianHuff-DEV\\reapy\\ignore"
  tomcat_version: "8.5.50"
  date: "2019-12-17"
Plans:
  - Name: Test
    Tasks:
    - Name: Test
      Steps:
      - Kind: Copy
        Description: Copy a file from a to b
        Preferences:
          Source: ${workdir}\\from
          Destination: ${workdir}\\to
  - Name: Start Tomcat service
    Tasks:
    - Name: Start Tomcat service
      Steps:
      - Kind: Watch
        Description: "Watch the Tomcat log to check if is started"
        Preferences:
          Path: "${workdir}\\apache-tomcat-${tomcat_version}\\logs\\catalina.${date}.log"
          Message: "message"
  - Name: Uninstall Tomcat
    Tasks:
    - Name: Uninstall Tomcat service
      Steps: 
      - Kind: Command
        Description: Execute the command uninstalling Tomcat as a Windows service
        Preferences:
          Command: "./tomcat8.exe"
          Path: "${workdir}\\apache-tomcat-${tomcat_version}\\bin"
          Args:
            - "//DS//Tomcat8"
  - Name: Install Tomcat
    Description: Install Tomcat as a Windows service
    Tasks:
    - Name: Download Tomcat and install it as a Windows service
      Steps:
      # - Kind: Service
      #   Description: Stop Tomcat
      - Kind: Delete
        Description: Clean up the workdir
        Preferences:
          Path: ${workdir}
      - Kind: CreateFolder
        Description: Create the workdir
        Preferences:
          Path: ${workdir}
      - Kind: Download
        Description: Download the release .zip file
        Preferences:
          URL: https://www-us.apache.org/dist/tomcat/tomcat-8/v${tomcat_version}/bin/apache-tomcat-${tomcat_version}-windows-x64.zip
          Path: ${workdir}
      - Kind: Unzip
        Description: Unzip the release .zip file
        Preferences:
          Source: "${workdir}\\apache-tomcat-${tomcat_version}-windows-x64.zip"
          Destination: ${workdir}
      - Kind: Command
        Description: Execute the command installing Tomcat as a Windows service
        Preferences:
          Command: "cmd.exe"
          Path: "${workdir}\\apache-tomcat-${tomcat_version}\\bin"
          Args:
            - "/C"
            - "service.bat install"

      